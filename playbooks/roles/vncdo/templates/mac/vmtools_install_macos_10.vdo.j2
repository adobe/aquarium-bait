# Script to install the mounted vmtools iso on MacOS 10

# Wait for window with iso opens, selecting the first "Install VMware Tools" item and open it
pause 20 key tab key super-down pause 10

# Enter voiceover
key super-f5 pause 5 key enter

# On welcome screen switch to and press Continue button
pause 10 key tab key space

# On install location switch to and press Install button
pause 10 key shift-tab key space

# Press Continue installation button by enter
pause 1 key enter

# In password request window enter password and press Install Software button
pause 20 type "{{ ansible_sudo_pass }}" pause 1 key enter

# Wait for installation and enter the security preferences
pause 20 key space

# Click on unlocking the admin changes
pause 10 key shift-tab pause 1 key shift-tab pause 1 key shift-tab pause 1 key shift-tab pause 1 key space

# Enter password to unlock admin changes
pause 5 type "{{ ansible_sudo_pass }}" pause 1 key enter

# Go to Allow button (or details button) and click it
pause 5 key shift-tab pause 1 key shift-tab pause 1 key shift-tab pause 1 key space

# Selecting and pressing Not Now in reboot request popup
pause 5 key shift-tab pause 1 key space

# Disable voiceover
pause 1 key super-f5

# Switch back to installer window
pause 5 key super-tab

# Wait 2m for the installation and press Restart button to trigger reboot
pause 120 key enter

# Wait for reboot
pause 120
